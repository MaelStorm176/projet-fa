{% extends 'base.html.twig' %}

{% block title %}{{ recette.name }}{% endblock %}

{% block body %}

<a href="/recipe/all">Retour a la liste des recettes</a>
    <p>{{recette.name}}</p>
    <div>
        {% for ingredients in ingredient %}
            <p>- {{ingredients.ingredient.name}}</p>
        {% endfor %}
    </div>
    <div>
        {% for steps in step %}
            <p>{{steps.step}}</p>
       {% endfor %}
    </div>
    <div class="rating">
        {% if rating != [] and rating.rate == 5 %}
            <input type="radio" name="rating" value="5" id="5" checked onclick="rate({{recette.id}}, 5)">
            <label for="5">☆</label>
        {% else %}
            <input type="radio" name="rating" value="5" id="5" onclick="rate({{recette.id}}, 5)">
            <label for="5">☆</label> 
        {% endif %}
        {% if rating != [] and rating.rate == 4 %}
            <input type="radio" name="rating" value="4" id="4" checked onclick="rate({{recette.id}}, 4)">
            <label for="4">☆</label>
        {% else %}
            <input type="radio" name="rating" value="4" id="4" onclick="rate({{recette.id}}, 4)">
            <label for="4">☆</label> 
        {% endif %}
        {% if rating != [] and rating.rate == 3 %}
            <input type="radio" name="rating" value="3" id="3" checked onclick="rate({{recette.id}}, 3)">
            <label for="3">☆</label>
        {% else %}
            <input type="radio" name="rating" value="3" id="3" onclick="rate({{recette.id}}, 3)">
            <label for="3">☆</label> 
        {% endif %}
        {% if rating != [] and rating.rate == 2 %}
            <input type="radio" name="rating" value="2" id="2" checked onclick="rate({{recette.id}}, 2)">
            <label for="2">☆</label>
        {% else %}
            <input type="radio" name="rating" value="2" id="2" onclick="rate({{recette.id}}, 2)">
            <label for="2">☆</label> 
        {% endif %}
        {% if rating != [] and rating.rate == 2 %}
            <input type="radio" name="rating" value="1" id="1" checked onclick="rate({{recette.id}}, 1)">
            <label for="1">☆</label>
        {% else %}
            <input type="radio" name="rating" value="1" id="1" onclick="rate({{recette.id}}, 1)">
            <label for="1">☆</label> 
        {% endif %}
    </div>
    <div>
        {{ form_start(recetteForm) }}
            {{ form_row(recetteForm.content) }}
            {{ form_row(recetteForm.save) }}
        {{ form_end(recetteForm) }}
    </div>
    <div>
        <h2>Commentaires</h2>
        {% for comments in comment %}
            {% if comments.recette == recette %}
                <div>
                    <p>{{comments.user.email}}</p>
                    <p>{{comments.content}}</p>
                    <p>{{comments.createdAt | date("d/m/Y h:i:s")}}</p>
                </div>
            {% endif %}
        {% endfor %}
    </div>
{% endblock %}
